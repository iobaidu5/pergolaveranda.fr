/**
 * @version 10
 * @last-update 2024-04-08 11:05:12 +0000
 */
Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),dexem_dni_a4cbe3bb671645f7a1ce32dca33c9881={elems_base_selector:":not(html, head, head *)",debug_mode:!1,can_alter_dom:!1,format_names:["with_parentheses","international","national","digits_only"],script_prefix:"dexem_dni_a4cbe3bb671645f7a1ce32dca33c9881",base_url:"https://next.voicepublisher.net/api/v2/dni",account_uuid:"60b3e595-3559-432b-8451-c76dd319edd0",tracking_numbers:[],max_session_duration:1800,max_timeout_duration:5,integration:"none",has_mapping:!1,has_route_record:!1,session_variables:[],target_selectors:{a:["href"]},observer_css_selectors:[],custom_sources:{},observer:undefined,getJSONUnique:0,pool_dom_refs:{},record_route:!0,measurement_ids:[],route_has_to_be_recorded:function(){var e=this;return e.has_route_record&&e.record_route},getJSON:function(e,t,r){var o="_jsonp_"+this.getJSONUnique;this.getJSONUnique+=1,e.match(/\?/)?e+="&callback="+o:e+="?callback="+o;var n=document.createElement("script");n.type="text/javascript",n.src=e,window[o]=function(e){t.call(r||window,e),document.getElementsByTagName("head")[0].removeChild(n),n=null,delete window[o]},document.getElementsByTagName("head")[0].appendChild(n)},uuidv4:function(){var e=this,t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});return e.debug_log(arguments,"}",{"return":t}),t},isInIframe:function(){var e,t=this;try{e=window.self!==window.top}catch(r){e=!0}return t.debug_log(arguments,"}",{"return":e}),e},getLocalStorageKey:function(e){return this.script_prefix+"_"+e},getDocumentUrl:function(){try{return window.top.document.URL}catch(e){return document.URL}},getReferrer:function(){var e,t=this;try{e=window.top.document.referrer}catch(o){e=document.referrer}var r=t.getDocumentUrl().match(/^.*dexem_dni_forced_referrer=([^&#]*)/);return r&&(e=r[1]),t.debug_log(arguments,"}",{"return":e}),e},getDataLayerValueOf:function(t,e){var r,o=this;switch(e){case"gtm":try{window.dataLayer.forEach(function(e){e&&e[t]&&(r=e[t])})}catch(n){}break;case"tc":try{r=window.tc_vars[t]}catch(n){}}return o.debug_log(arguments,"}",{"return":r,key:t,obj:e}),r},is_reset_from_url:function(){return!!document.URL.match(/dexem_dni_reset=true/)},setOrRestoreSession:function(){var t=this;t.debug_log(arguments,"{");var e,r,o,n,a=1e3*t.max_session_duration,i=new Date;try{var s=Date.parse(localStorage.getItem(t.getLocalStorageKey("session_last_action")));(isNaN(s)||a<i-s||t.is_reset_from_url())&&(t.debug_log(arguments,"-",{msg:"Reset session",session_last_action:s,session_max_duration_ms:a}),localStorage.removeItem(t.getLocalStorageKey("swapped_numbers")),localStorage.removeItem(t.getLocalStorageKey("session_data")),localStorage.removeItem(t.getLocalStorageKey("session_uuid")),localStorage.removeItem(t.getLocalStorageKey("dni_source")),localStorage.removeItem(t.getLocalStorageKey("dni_permutation_source"))),localStorage.setItem(t.getLocalStorageKey("session_last_action"),i)}catch(m){}try{e=localStorage.getItem(t.getLocalStorageKey("session_uuid")),t.debug_log(arguments,"-",{msg:"get session_uuid",session_uuid:e})}catch(m){}e||(e=t.uuidv4()),t.saveSessionUuid(e);try{r=JSON.parse(localStorage.getItem(t.getLocalStorageKey("session_data"))),t.debug_log(arguments,"-",{msg:"get session_data",session_data:r})}catch(m){}if(!r){var c=t.getDocumentUrl(),u=t.getReferrer();t.debug_log(arguments,"-",{msg:"get referrer & landing_page",referrer:u,landing_page:c}),r={referrer:u,landing:c,user_agent:window.navigator.userAgent,screen_size:screen.width+"x"+screen.height},t.route_has_to_be_recorded()&&(r.route=[]);var _=t.getDniSource(r.referrer,r.landing);r.dni_source=_.real,r.dni_permutation_source=_.permutation;var d=c.match(/^(.*)gclid=([^&#]*).*$/);d&&(r.ga_gclid=d[2]),t.has_mapping&&(r.variables={})}if(!t.isInIframe()&&(t.session_variables.forEach(function(e){r.variables[e.name]=t.getDataLayerValueOf(e.param,e.mode)||r.variables[e.name]}),t.route_has_to_be_recorded())){var g=r.route[r.route.length-1],l=t.getDocumentUrl();g&&g.url==l||r.route.push({at:i.getTime(),url:l})}t.saveSessionData(r);try{o=localStorage.getItem(t.getLocalStorageKey("dni_source"))}catch(m){}try{n=localStorage.getItem(t.getLocalStorageKey("dni_permutation_source"))}catch(m){}o&&n||(o=(_=t.getDniSource(t.session_data.referrer,t.session_data.landing)).real,n=_.permutation);t.saveDniSource(o),t.saveDniPermutationSource(n),t.restoreSavedNumberPools(),t.debug_log(arguments,"}")},selectCandidateNumbers:function(){var e=this;e.debug_log(arguments,"{");var t=e.findNumbersFromDniSource(e.dni_permutation_source),r=e.selectNumbersFromSource(t,e.dni_permutation_source,e.session_data.referrer,e.session_data.landing);r=r.concat(e.findNumbersFromDniSource("all")),e.selected_tracking_numbers=r,e.debug_log(arguments,"}")},restoreSavedNumberPools:function(){var e=this;if(e.debug_log(arguments,"{"),e.swapped_numbers===undefined){var t;try{t=localStorage.getItem(e.getLocalStorageKey("swapped_numbers"))}catch(a){}if(t)try{t=JSON.parse(t)}catch(a){console.log({msg:"cannot restore swapped_numbers",swapped_numbers:t}),t={}}else t={};e.swapped_numbers=t}for(var r in t){var o=t[r],n=e.getNumberPoolIndex(r);0<=n&&(e.tracking_numbers[n].value=o)}try{localStorage.setItem(e.getLocalStorageKey("swapped_numbers"),JSON.stringify(e.swapped_numbers||{}))}catch(a){}e.debug_log(arguments,"}",{"swapped_numbers.length":e.swapped_numbers.length})},getNumberPoolIndex:function(r){var o=this,n=-1;return o.tracking_numbers.every(function(e,t){return e.pool_uuid==r?(n=t,o.debug_log(arguments,"}",{"return":!1,pool_uuid:r}),!1):(o.debug_log(arguments,"}",{"return":!0,pool_uuid:r}),!0)}),o.debug_log(arguments,"}",{"return":n,pool_uuid:r}),n},replaceKnownNumbers:function(){var t=this;t.debug_log(arguments,"{");var r=document.documentElement.outerHTML;t.get_document_and_shadow_root().forEach(function(e){r+=e.innerHTML}),t.found_pool_tracking_numbers={},t.selected_tracking_numbers.forEach(function(e){t.replaceNumber(e,r)}),t.get_document_and_shadow_root().forEach(function(e){e.querySelectorAll(".dexem-dni.known-number").forEach(function(e){var t=e.closest(".number-to-swap");t&&(t.style.visibility="visible")})}),t.debug_log(arguments,"}")},replaceNumber:function(r,e){var t=this;t.debug_log(arguments,"{",{"tracking_number.target":r.target});var o={},n=[];t.format_names.forEach(function(e){var t=r.target_regexps[e];o[e]=t,n.push(t)});var a=new RegExp(n.join("|"));if(e.match(a))for(var i in t.debug_log(arguments,"-",{msg:"found in outerHTML","tracking_number.target":r.target,pool:r.is_pool}),o){var s=o[i],c=new RegExp(s);if(e.match(c))if(t.debug_log(arguments,"-",{msg:"found in outerHTML for format '"+i+"'","tracking_number.target":r.target,pool:r.is_pool}),r.is_pool){if(t.searchText(t.elems_base_selector,c)){t.found_pool_tracking_numbers[r.pool_uuid]=!0;var u=t.swapped_numbers[r.pool_uuid];u==undefined?t.hideNumber(r,i):"searching"!=u&&r.value&&r.value.uuid&&t.replaceStringInPage(s,r.value[i])}}else t.replaceStringInPage(s,r.value[i])}t.debug_log(arguments,"}")},get_document_and_shadow_root:function(){return[document].concat(Array.from(document.querySelectorAll("*")).filter(function(e){return null!==e.shadowRoot}).map(function(e){return e.shadowRoot}))},searchText:function(r,a){var i=this;i.debug_log(arguments,"{",{selector:r,search:a});var s=!1;return i.get_document_and_shadow_root().forEach(function(e){if(i.debug_log(arguments,"=>",{root_elem:e}),(e==document?e.documentElement.innerHTML:e.innerHTML).match(a))return s=!0,i.debug_log(arguments,"}",{"return":!0,message:"found in text element"}),!0;var t=i.target_selectors;for(var n in t){t[n].forEach(function(o){e.querySelectorAll(r+" "+n+"["+o+"]").forEach(function(e,t){var r=e.getAttribute(o);if(r!=undefined&&r.match(a))return s=!0,i.debug_log(arguments,"-",{msg:"found in tag attribute",tag:n,attribute:o}),!0})})}}),i.debug_log(arguments,"}",{"return":s}),s},replaceStringInPage:function(e,t){var r=this;r.debug_log(arguments,"{",{value:t});var o=new RegExp(e,"g");r.replaceStringInBody(o,t),r.replaceStringInLinksAndTitle(o,t),r.debug_log(arguments,"}")},replaceUnknownPoolNumbers:function(){var i=this;i.debug_log(arguments,"{"),i.selected_tracking_numbers.forEach(function(a,r){i.debug_log(arguments,"-",{msg:"handle tracking number","tracking_number.target":a.target});var e=i.swapped_numbers[a.pool_uuid];if(a.is_pool&&e==undefined&&i.found_pool_tracking_numbers[a.pool_uuid])if(i.swapped_numbers[a.pool_uuid]===undefined){i.swapped_numbers[a.pool_uuid]="searching";var t=btoa(JSON.stringify(i.session_data)),o=new URL(i.base_url+"/accounts/"+i.account_uuid+"/pools/"+a.pool_uuid+"/numbers/next");o.search=new URLSearchParams({callback:"?",sid:i.session_uuid,rid:i.run_uuid,custom_data:t}),i.getJSON(o.toString(),function(e){if(i.debug_log(arguments,"{",{data:e}),e.uuid){var n={uuid:e.uuid,national:e.number_national,international:e.number_international,digits_only:e.number_digits_only,with_parentheses:e.number_with_parentheses};i.swapped_numbers[a.pool_uuid]=n;try{localStorage.setItem(i.getLocalStorageKey("swapped_numbers"),JSON.stringify(i.swapped_numbers||{}))}catch(t){}i.selected_tracking_numbers[r].value=n,i.format_names.forEach(function(o){if(i.can_alter_dom){var r=".dexem-dni.pool-"+a.pool_uuid+"."+o;i.get_document_and_shadow_root().forEach(function(e){var t=e.querySelectorAll(r);0<t.length&&t.forEach(function(e,t){i.debug_log(arguments,"-",{msg:"replacing in wrapped text element '"+r+"'",new_value:n[o],elem:e}),e.innerHTML=n[o]})})}else{var e=i.pool_dom_refs[a.pool_uuid];if(e){var t=e[o];t&&t.forEach(function(e,t){var r=new RegExp("("+a.target_regexps[o]+")","g");i.debug_log(arguments,"-",{msg:"replacing in unwrapped text element ",new_value:n[o],elem:e}),e.textContent=e.textContent.replace(r,n[o])})}}}),i.replaceNumberInLinksAndTitle(a)}else try{console.log("no more number for "+a.pool_uuid)}catch(t){}i.can_alter_dom&&i.get_document_and_shadow_root().forEach(function(e){e.querySelectorAll(".dexem-dni.pool-"+a.pool_uuid).forEach(function(e){e.style.visibility="visible";var t=e.closest(".number-to-swap");t&&(t.style.visibility="visible")})}),i.debug_log(arguments,"}")})}else i.debug_log(arguments,"-",{msg:"skipping next request because another request is being executed",pool_uuid:a.pool_uuid})}),i.debug_log(arguments,"}")},hideNumber:function(e,t){var r=this;r.debug_log(arguments,"{",{tracking_number_target:e.target,format:t});var o=new RegExp("("+e.target_regexps[t]+")","g");if(r.can_alter_dom){var n='<span class="dexem-dni pool-'+e.pool_uuid+" "+t+'" style="visibility: hidden">$1</span>';r.replaceText(r.elems_base_selector+":not(.dexem-dni)",o,n)}else{var a=r.searchTextAndReturnReferences(r.elems_base_selector,o);r.pool_dom_refs[e.pool_uuid]||(r.pool_dom_refs[e.pool_uuid]={}),r.pool_dom_refs[e.pool_uuid][t]=a}r.debug_log(arguments,"}")},replaceStringInBody:function(e,t){var r=this;if(r.debug_log(arguments,"{",{message:"replacing in text element",new_value:t}),r.can_alter_dom){var o='<span class="dexem-dni known-number">'+t+"</span>";r.replaceText(r.elems_base_selector+":not(.dexem-dni)",e,o)}else r.replaceText(r.elems_base_selector,e,t,!0);r.debug_log(arguments,"}")},replaceStringInLinksAndTitle:function(a,i){var s=this;s.debug_log(arguments,"{",{given_value:i}),document.title=document.title.replace(a,i);var e=s.target_selectors;for(var c in e){e[c].forEach(function(n,e){s.debug_log(arguments,"-",{msg:"search for replace",tag:c,attribute:n}),"a"===c&&"href"===n&&(i=i.replace(/ /g,"")),s.get_document_and_shadow_root().forEach(function(e){e.querySelectorAll(c+"["+n+"]").forEach(function(e,t){var r=e.getAttribute(n);if(r!=undefined){var o=r.replace(a,i);o!=r&&(s.debug_log(arguments,"-",{msg:"replacing in tag attrireplaceStringInPagebute",tag:c,attribute:n,value:r,new_value:o}),e.setAttribute(n,o))}})})})}s.debug_log(arguments,"}")},searchTextAndReturnReferences:function(t,r){var e=this;e.debug_log(arguments,"{",{selector:t,regexp:r});var o=[];return e.get_document_and_shadow_root().forEach(function(e){e.querySelectorAll(t).forEach(function(e){var t=e.firstChild;if(t)for(;3===t.nodeType&&t.nodeValue.match(r)&&o.push(t),t=t.nextSibling;);})}),e.debug_log(arguments,"}",{"return":o}),o},replaceText:function(e,i,s,c){var t=this;t.debug_log(arguments,"{",{selector:e,regexp:i,replacement:s,textOnly:c}),t.get_document_and_shadow_root().forEach(function(a){a.querySelectorAll(e).forEach(function(e){var t,r,o=e.firstChild;if(o)do{if(3===o.nodeType&&(r=(t=o.nodeValue).replace(i,s))!==t)if(!c&&/</.test(r)){wrapper=a.createElement("div"),wrapper.innerHTML=r;for(var n=wrapper.childNodes;o.before(n[0]),n[0];);o.remove()}else o.nodeValue=r}while(o=o.nextSibling)})}),t.debug_log(arguments,"}")},replaceNumberInLinksAndTitle:function(o){var n=this;n.debug_log(arguments,"{",{tracking_number_target:o.target}),n.format_names.forEach(function(e){var t=new RegExp(o.target_regexps[e],"g"),r=o.value[e];n.replaceStringInLinksAndTitle(t,r)}),n.debug_log(arguments,"}")},showAllHiddenNumbers:function(){var e=this;e.can_alter_dom&&e.get_document_and_shadow_root().forEach(function(e){e.querySelectorAll(".dexem-dni, .number-to-swap").forEach(function(e){"hidden"==e.style.visibility&&(e.style.visibility="visible")})})},saveSessionUuid:function(e){var t=this;t.session_uuid=e;try{localStorage.setItem(t.getLocalStorageKey("session_uuid"),e)}catch(r){t.debug_log(arguments,"-",{msg:"KO",uuid:e})}},saveDniPermutationSource:function(e){var t=this;t.dni_permutation_source=e;try{localStorage.setItem(t.getLocalStorageKey("dni_permutation_source"),e)}catch(r){t.debug_log(arguments,"-",{msg:"KO",dni_permutation_source:e})}},saveDniSource:function(e){var t=this;t.dni_source=e;try{localStorage.setItem(t.getLocalStorageKey("dni_source"),e)}catch(r){t.debug_log(arguments,"-",{msg:"KO",dni_source:e})}},saveSessionData:function(e){var t=this;t.session_data=e;try{localStorage.setItem(t.getLocalStorageKey("session_data"),JSON.stringify(e))}catch(r){t.debug_log(arguments,"-",{msg:"KO",session_data:e})}},getContentSquareData:function(e){this.sendIntegrationData({cs_project_id:e.projectId,cs_user_id:e.sessionKey.split(".")[0],cs_session_id:e.sessionKey.split(".")[1]})},finalizeSessionDataAndReplacePoolNumbers:function(){var t=this;t.debug_log(arguments,"{");var r=t.session_data;try{window._uxa=window._uxa||[],_uxa.push(["afterPageView",t.getContentSquareData.bind(t)])}catch(i){}try{_paq.push([function(){var e=this.getVisitorId();e&&e!==r.matomo_visitor_id&&t.sendIntegrationData({matomo_visitor_id:e})}])}catch(i){t.saveSessionData(r)}try{var e;if(this.cookieIsDefined("_fbc"))e=this.getCookieValue("_fbc");else{var o=r.landing.match(/fbclid=([^&#]*)/);if(o){var n=o.slice(1);e=["fb","1",Date.now(),n].join(".")}}e&&e!==r.fbc&&t.sendIntegrationData({fbc:e})}catch(i){t.saveSessionData(r)}try{var a=pa.getVisitorId();a&&a!==r.piano_visitor_id&&t.sendIntegrationData({piano_visitor_id:a})}catch(i){t.saveSessionData(r)}if("google_analytics"==t.integration){t.can_alter_dom&&setTimeout(t.showAllHiddenNumbers,1e3*t.max_timeout_duration);try{ga(function(){if(!r.ga_cid){var e=ga.getAll();t.sendIntegrationData({ga_cid:e[0].get("clientId")})}})}catch(i){t.saveSessionData(r)}}try{t.getGA4Data("ga_cid",[100,500,1e3]),t.getGA4Data("ga_sid",[100,500,1e3])}catch(i){t.saveSessionData(r)}t.can_alter_dom&&setTimeout(t.showAllHiddenNumbers,1e3*t.max_timeout_duration),t.replaceUnknownPoolNumbers(),t.debug_log(arguments,"}")},getGA4Data:function(r,e){var t={ga_cid:"client_id",ga_sid:"session_id"}[r],o=this;if(o.cookieIsDefined("_ga")&&o.gtag("get",o.measurement_ids[0],t,function(e){if(e&&"string"==typeof e&&e!==o.session_data[r]){var t={};t[r]=e,o.sendIntegrationData(t)}}),!o.session_data[r]){var n=e.shift();n&&setTimeout(function(){o.getGA4Data(r,e)},n)}},gtag:function(){window.dataLayer.push(arguments)},cookieIsDefined:function(t){return!!document.cookie.split(";").map(function(e){return e.trim().split("=")}).find(function(e){return t===e[0]})},getCookieValue:function(e){for(var t,r=document.cookie.split(";").map(function(e){return e.trim().split("=")}),o=0;o<r.length;o++)if(r[o][0]===e){t=r[o];break}return t?t[1]:undefined},sendIntegrationData:function(e){var t=this;t.session_data=Object.assign(t.session_data,e),t.saveSessionData(t.session_data),t.send_integration==undefined&&(t.send_integration={max_tries:10,tries:0});var r=[];t.selected_tracking_numbers.forEach(function(e){var t=e.value;t&&t.uuid&&r.push(t.uuid)});var o=t.selected_tracking_numbers.filter(function(e){return e.is_pool}),n=o.length==r.length&&0!=o.length,a=t.send_integration.tries>=t.send_integration.max_tries;if(n||a){var i={};["ga_cid","ga_sid","cs_project_id","cs_user_id","cs_session_id","matomo_visitor_id","piano_visitor_id","fbc"].forEach(function(e){t.session_data[e]&&(i[e]=t.session_data[e])}),0<Object.keys(i).length&&t.sendCustomData(r,i)}else t.send_integration.tries+=1,setTimeout(function(){t.sendIntegrationData(e)},1e3)},sendRouteAndSessionVariables:function(){var e=this;e.debug_log(arguments,"{");var t=[];for(var r in e.swapped_numbers){var o=e.swapped_numbers[r];t.push(o.uuid)}var n={};if(e.isInIframe());else{var a=e.session_data.route;if(a){var i=a[a.length-1];e.run_started_at<=i.at&&(n.route_entry=i)}e.has_mapping&&(n.variables=e.session_data.variables)}e.sendCustomData(t,n),e.debug_log(arguments,"}")},sendCustomData:function(e,t){var r=this,o=e.filter(function(e){return null!=e});if(0<o.length){var n=o.join(","),a=btoa(JSON.stringify(t)),i=new URL(r.base_url+"/accounts/"+r.account_uuid+"/numbers/custom_data");i.search=new URLSearchParams({sid:r.session_uuid,rid:r.run_uuid,uuid:n,callback:"?",custom_data:a}),r.getJSON(i.toString(),function(){})}},findNumbersFromDniSource:function(t){var e=this,r=[],o=0<=["google_organic","bing_organic","yahoo_organic"].indexOf(t);return e.tracking_numbers.forEach(function(e){(o&&"organic"===e.source&&0<=e.source_options.indexOf(t)||e.source===t)&&r.push(e)}),e.debug_log(arguments,"}",{dni_source:t,"return.length":r.length}),r},dni_source_is_google_adwords:function(e,t){if(t.match(/^(.*)gclid=(.*)$/))return!0;if(e.match(/^(.*)google(.*)$/)&&!e.match(/^(.*)mail\.google\.com(.*)$/))if(e.match(/^(.*)maps\.google\.[a-z\.]{2,5}(.*)$/));else if(e.match(/^(.*)google\.[a-z\.]{2,5}\/aclk(.*)$/)||e.match(/^(.*)google\.[a-z\.]{2,5}\/afs(.*)$/)||t.match(/^(.*)utm_medium=cpc(.*)$/i)||t.match(/^(.*)utm_medium=ppc(.*)$/i))return!0;return!1},dni_source_is_bing_ads:function(e,t){return!!t.match(/msclkid=/i)||!(!e.match(/^(.*){1}(\/|\.)bing\.(.*)$/)&&!t.match(/^(.*)utm_source=bing(.*)$/i)||!t.match(/^(.*)utm_medium=cpc(.*)$/i)&&!t.match(/^(.*)utm_medium=ppc(.*)$/i))},dni_source_is_google_organic:function(e,t){if(e.match(/^(.*)google(.*)$/)&&!e.match(/^(.*)mail\.google\.com(.*)$/))if(e.match(/^(.*)maps\.google\.[a-z\.]{2,5}(.*)$/));else if(!(e.match(/^(.*)google\.[a-z\.]{2,5}\/aclk(.*)$/)||e.match(/^(.*)google\.[a-z\.]{2,5}\/afs(.*)$/)||t.match(/^(.*)utm_medium=cpc(.*)$/i)||t.match(/^(.*)utm_medium=ppc(.*)$/i)))return!0;return!1},dni_source_is_bing_organic:function(e,t){return!(!e.match(/^(.*){1}(\/|\.)bing\.(.*)$/)||e.match(/^(.*)bing\.com\/local(.*)$/)||t.match(/^(.*)utm_medium=cpc(.*)$/i)||t.match(/^(.*)utm_medium=ppc(.*)$/i))},dni_source_is_yahoo_organic:function(e,t){return!(!e.match(/^(.*)yahoo(.*)$/)||e.match(/^(.*)mail\.yahoo\.com(.*)$/)||e.match(/^(.*)local\.yahoo\.com(.*)$/)||e.match(/^(.*)local\.search\.yahoo\.com(.*)$/)||t.match(/^(.*)utm_medium=cpc(.*)$/i)||t.match(/^(.*)utm_medium=ppc(.*)$/i))},dni_source_is_facebook_ads:function(e,t){return t.match(/^(.*)utm_source=facebook(.*)$/i)&&t.match(/^(.*)utm_medium=cpc(.*)$/i)},dni_source_is_linkedin_organic:function(e){return!!e.match(/^(.*)linkedin.com(.*)$/)},dni_source_is_facebook_organic:function(e,t){return!!t.match(/^(.*)fbclid=(.*)$/)},dni_source_is_custom:function(e,t){var r=e.conditions;for(var o in r){var n=r[o],a=n.target;if(!(0<=["landing_page","referrer"].indexOf(a)))return!1;if(!!!t[a].match(new RegExp(n.value,"i")))return!1}return!0},sourceMatch:function(e,t,r){var o=this.custom_sources[e];if(this.custom_sources[e])return this.dni_source_is_custom(o,{referrer:t,landing_page:r});switch(e){case"url":break;case"google_adwords":return this.dni_source_is_google_adwords(t,r);case"bing_ads":return this.dni_source_is_bing_ads(t,r);case"facebook_ads":return this.dni_source_is_facebook_ads(t,r);case"facebook_organic":return this.dni_source_is_facebook_organic(t,r);case"linkedin_organic":return this.dni_source_is_linkedin_organic(t,r);case"google_organic":return this.dni_source_is_google_organic(t,r);case"bing_organic":return this.dni_source_is_bing_organic(t,r);case"yahoo_organic":return this.dni_source_is_yahoo_organic(t,r);case"single_web_referral":break;case"all_web_referrals":if(0<t.length)return!0;break;case"direct":if(0===t.length)return!0;break;case"all":return!0}return!1},selectNumbersFromSource:function(e,t,r,o){var n=this,a=[],i=n.custom_sources[t];if(n.custom_sources[t])n.dni_source_is_custom(i,{referrer:r,landing_page:o})&&(a=e);else if(0<e.length)switch(t){case"url":e.forEach(function(e){o.match(e.source_options[0])&&a.push(e)});break;case"google_adwords":this.dni_source_is_google_adwords(r,o)&&(a=e);break;case"bing_ads":this.dni_source_is_bing_ads(r,o)&&(a=e);break;case"google_organic":this.dni_source_is_google_organic(r,o)&&(a=e);break;case"bing_organic":this.dni_source_is_bing_organic(r,o)&&(a=e);break;case"yahoo_organic":this.dni_source_is_yahoo_organic(r,o)&&(a=e);break;case"facebook_ads":this.dni_source_is_facebook_ads(r,o)&&(a=e);break;case"facebook_organic":this.dni_source_is_facebook_organic(r,o)&&(a=e);break;case"linkedin_organic":this.dni_source_is_linkedin_organic(r,o)&&(a=e);break;case"single_web_referral":0<r.length&&e.forEach(function(e){r.match(e.source_options[0])&&a.push(e)});break;case"all_web_referrals":0<r.length&&(a=e);break;case"direct":0===r.length&&(a=e);break;case"other":case"all":a=e}return n.debug_log(arguments,"}",{"return.length":a.length,dni_source:t,referrer:r,landing_page:o}),a},dniSourcesByPriority:function(){var e=["url","google_adwords","bing_ads","facebook_ads","google_organic","bing_organic","yahoo_organic","facebook_organic","linkedin_organic","single_web_referral","all_web_referrals","direct"];return Object.keys(this.custom_sources).concat(e)},numbersToHash:function(){var e=this;e.debug_log(arguments,"{");var t={},r=e.dniSourcesByPriority();for(var o in r.concat(["all"])){var n=r.concat(["all"])[o],a=e.findNumbersFromDniSource(n);0<a.length&&(t[n]=a)}return e.debug_mode&&e.debug_log(arguments,"}",{"return":e.extract(t,"target")}),t},extract:function(e,t){for(var r in result={},e){var o=e[r],n=[];for(var a in o){var i=o[a],s=undefined;i&&(s=i[t]),n.push(s)}result[r]=n}return result},getDniSource:function(o,n){var a=this;a.debug_log(arguments,"{",{referrer:o,landing_page:n});var t={},e=a.numbersToHash();for(var r in e){var i=e[r],s=a.selectNumbersFromSource(i,r,o,n);0<s.length&&(t[r]=s)}var c="other";a.dniSourcesByPriority().every(function(e){return t[e]==undefined||(c=e,!1)});var u="all";"other"==c?a.dniSourcesByPriority().every(function(e,t){var r=a.sourceMatch(e,o,n);return a.debug_log(arguments,"-",{msg:"the source match ?",dni_source:e,match:r}),!r||(document.real_source=e,u=e,!1)}):u=c;return a.debug_log(arguments,"}",{"return.permutation":c,"return.real":u}),{permutation:c,real:u}},runDni:function(e){e=e||{};var t=this;t.run_uuid=t.uuidv4(),t.run_started_at=(new Date).getTime(),t.debug_log(arguments,"{",{options:e}),e.record_route===undefined?t.record_route=!0:t.record_route=e.record_route,t.observe(),t.setOrRestoreSession(),t.sendRouteAndSessionVariables(),t.selectCandidateNumbers(),t.replaceKnownNumbers(),t.finalizeSessionDataAndReplacePoolNumbers(),t.debug_log(arguments,"}")},ready:function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},debug_log_base_indentation:undefined,debug_log:function(arguments,e,t){var r=this;if(r.debug_mode){var o;t&&(o="object"==typeof t?t:{message:t});var n=r.getStackTrace();r.debug_log_base_indentation||(r.debug_log_base_indentation=n.length);var a="",i=n[1].match(/(.*)\:([0-9]+\:[0-9]+)[\)]?$/);i&&(a=i[2]+":");var s=n.length-r.debug_log_base_indentation;s<0&&(s=0);var c,u=Array(s+1).fill("").join("  ");try{throw new Error}catch(l){var _,d=/(\w+)@|at (\w+) \(/g,g=l.stack;d.exec(g),c=(_=d.exec(g))?_[1]||_[2]:"<unknown>"}o?console.log(u+a+c,e,o):console.log(u+a+c,e)}},getStackTrace:function(){var e;try{throw new Error("")}catch(n){e=n.stack||""}var t=[],r=e.split("\n");for(var o in r)t.push(r[o].trim());return t.splice("Error"==e[0]?2:1)},observe:function(){var o=this;if(o.debug_log(arguments,"{",{}),o.observer===undefined)if(0<o.observer_css_selectors.length){o.debug_log(arguments,"-",{msg:"creating observer",selectors:o.observer_css_selectors});var n=o.observer_css_selectors.join(",");o.observer=new MutationObserver(function(e,t){for(var r in e){if(e[r].target.closest(n))return o.debug_log(arguments,"-",{msg:"A mutation target an element that match '"+n+"', Pausing the observer and starting .init({record_route: false})"}),o.observer.disconnect(),o.init({record_route:!1}),o.get_document_and_shadow_root().forEach(function(e){o.observer.observe(e,{childList:!0,subtree:!0})}),void o.debug_log(arguments,"-",{msg:"Mutation handled. Unpausing the observer"})}}),o.get_document_and_shadow_root().forEach(function(e){o.observer.observe(e,{childList:!0,subtree:!0})})}else o.debug_log(arguments,"-",{msg:"noting to do, observer_css_selectors is empty"});else o.debug_log(arguments,"-",{msg:"noting to do, observer already exists"});o.debug_log(arguments,"}")},init:function(e){var t=dexem_dni_a4cbe3bb671645f7a1ce32dca33c9881;t.debug_log(arguments,"{",{options:e});var r=navigator.userAgent.match(/(botify|AdsBot-Google|AhrefsBot|Baiduspider|Bingbot|BingPreview|DuckDuckBot|Exabot|Facebot|Googlebot|HeadlessChrome|Jooblebot|PingdomPageSpeed|Slurp|SMTBot|YandexBot|YandexMetrika|YandexMobileBot)/i);r?t.debug_log(arguments,"-",{msg:"DNI not available for bots: "+r[1]}):document.URL.match(/dexem_dni_disable=true/)?t.debug_log(arguments,"-",{msg:"disabled by URL parameter: "+document.URL}):t.runDni(e);t.debug_log(arguments,"}")}},dexem_dni_a4cbe3bb671645f7a1ce32dca33c9881.ready(dexem_dni_a4cbe3bb671645f7a1ce32dca33c9881.init);
